{% extends "layouts/layout.html" %}

{% block pageTitle %}
  Index page
{% endblock %}
{% set serviceName %}Annual health and welfare review of livestock{% endset %}

{% block beforeContent %}
  <a class="govuk-back-link" href="javascript:history.go(-1)">Back</a>
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-error-summary" data-module="govuk-error-summary" style="display: none;">
      <div role="alert">
        <h2 class="govuk-error-summary__title">
          There is a problem
        </h2>
        <div class="govuk-error-summary__body">
          <ul class="govuk-list govuk-error-summary__list">
            <li>
              <a href="#" id="error-summary-link">Enter the RCVS number</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <form class="form" method="post" onsubmit="return validateForm(event);">
      <div class="govuk-form-group">
        <h1 class="govuk-label-wrapper">
          <label class="govuk-label govuk-label--l" for="full-name">
            What is the vet's Royal College of Veterinary Surgeons (RCVS) number?
          </label>
        </h1>
        <label class="govuk-label" for="full-name">
          This is a 7-digit number...
        </label>
        <p id="validation-error" class="govuk-error-message" style="display: none;">
          <span class="govuk-visually-hidden">Error:</span>You must enter the RCVS number.
        </p>
        <input class="govuk-input govuk-!-width-three-quarters" id="full-name" name="full-name" type="text">
      </div>

      <button class="govuk-button" data-module="govuk-button" type="submit">Continue</button>
    </form>

    <script>
      function validateForm(event) {
        event.preventDefault(); // Prevent the default form submission behavior
    
        var vetNameInput = document.getElementById('full-name');
        var validationError = document.getElementById('validation-error');
        var errorSummary = document.querySelector('.govuk-error-summary');
        var errorSummaryLink = document.getElementById('error-summary-link');
    
        if (vetNameInput.value.trim() !== '') {
          validationError.style.display = 'none';
          errorSummary.style.display = 'none'; // Hide error summary
    
          // Redirect to the desired URL when the vet's name is entered
          window.location.href = 'next-page.html'; // Replace with the actual URL
          return true; // Form submission allowed
        }
    
        // Vet's name not entered, display error summary and add error styling
        validationError.style.display = 'block';
        errorSummary.style.display = 'block'; // Show error summary
        errorSummaryLink.innerText = 'Enter the vet\'s name'; // Update link text
        return false; // Form submission blocked
      }
    
      // Retrieve variables from sessionStorage
      var endemicsVariable = sessionStorage.getItem('endemics');
    
      // Check if endemicsVariable is present
      if (endemicsVariable) {
        // Redirect to 'endemics-next-step.html' when the "endemics" variable is present
        window.location.href = 'endemics-next-step.html'; // Replace with the actual URL
      }
    </script>
    
  </div>
</div>

{% endblock %}
