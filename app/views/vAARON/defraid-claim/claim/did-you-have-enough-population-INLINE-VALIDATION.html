{% extends "layouts/layout.html" %}

{% block pageTitle %}
Index page
{% endblock %}
{% set serviceName %}Annual health and welfare review of livestock{% endset%}

{% block beforeContent %}
  <a class="govuk-back-link" href="javascript:history.go(-1)">Back</a>
{% endblock %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">

    
    <div class="govuk-error-summary" data-module="govuk-error-summary" style="display: none;">
        <div role="alert">
            <h2 class="govuk-error-summary__title">
                There is a problem
            </h2>
            <div class="govuk-error-summary__body">
                <ul class="govuk-list govuk-error-summary__list">
                    <li>
                        <a href="#" id="error-summary-link">Select "Yes" or "No"</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <form class="form" method="post" onsubmit="return validateForm(event);">
    
        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset" aria-describedby="eligibility-bps-hint">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                    <h1 class="govuk-fieldset__heading">
                        Did you have [X] or more [species] on the date of the review?
                    </h1>
                </legend>
    
                <div id="vet-registered-hint" class="govuk-hint govuk-!-margin-bottom-5">
                    You can find this on the summary the vet gave you.
                </div>
    
                <p id="validation-error" class="govuk-error-message" style="display: none;">
                    <span class="govuk-visually-hidden">Error:</span>You must select "Yes" or "No".
                </p>
    
                <div class="govuk-radios govuk-radios">
                    <div class="govuk-radios__item">
                        <input class="govuk-radios__input" id="decision-yes" name="decision" type="radio" value="Yes">
                        <label class="govuk-label govuk-radios__label" for="decision-yes">
                            Yes
                        </label>
                    </div>
                    <div class="govuk-radios__item">
                        <input class="govuk-radios__input" id="decision-no" name="decision" type="radio" value="No">
                        <label class="govuk-label govuk-radios__label" for="decision-no">
                            No
                        </label>
                    </div>
                </div>
    
            </fieldset>
        </div>
    
        <button class="govuk-button" data-module="govuk-button" type="submit">Continue</button>
    
    </form>
    
    <script>
        function validateForm(event) {
            event.preventDefault(); // Prevent the default form submission behavior
    
            var decisionRadios = document.getElementsByName('decision');
            var errorElement = document.getElementById('validation-error');
            var errorSummary = document.querySelector('.govuk-error-summary');
            var errorSummaryLink = document.getElementById('error-summary-link');
    
            for (var i = 0; i < decisionRadios.length; i++) {
                if (decisionRadios[i].checked) {
                    errorElement.style.display = 'none';
                    errorSummary.style.display = 'none'; // Hide error summary
    
                    // Redirect to the desired URL when a decision is made
                    window.location.href = 'next-page.html'; // Replace with the actual URL
                    return true; // Form submission allowed
                }
            }
    
            // No decision made, display error message and add error styling
            errorElement.style.display = 'block';
            errorSummary.style.display = 'block'; // Show error summary
            errorSummaryLink.innerText = 'Select "Yes" or "No"'; // Update link text
            return false; // Form submission blocked
        }
    </script>
      
  </div>
</div>

{% endblock %}
